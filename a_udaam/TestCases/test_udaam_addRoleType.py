# -*- coding: utf-8 -*-"""@Time ： 2022/5/24 17:03@Auth ： tianxh@File ：test_udaam_addRoleType.py@IDE ：PyCharm@Motto：No Bug No Error"""from Basepage.unittestChushihua import TestApifrom Utils.page import Helperfrom Utils.operationyaml import read_yamlfrom Utils.log import logfrom Utils.operationini import Conffrom Utils.connectMysql import ConnectMysqlimport requestsimport sysclass AddRoleType(TestApi, Helper):    """    AddRoleType类，继承TestApi、Helper    TestApi：继承了Unittest.TestCase类    Helper: 重构了get、post、delete方法    """    def __init__(self):        # 获取服务器URL        self.url = read_yaml(sys.path[1]+"/a_udaam/data/server_address.yaml", "uddam_url")        # 获取参数存放路径        self.parameters_path = sys.path[1]+"/a_udaam/data/case_parameters.ini"        self.cf = Conf    '''角色类型同步，正常入参'''    def test_add_role_type_right(self):        # 获取init中的测试用例        # print("=============="+self.parameters_path)        datas = self.cf.getini_by_option(self.parameters_path, '角色类型同步参数正确', 'v1')        print(datas)        # data = json.dumps(dataDist).strip("{'}")        # get_parameter = dict_to_get_parameter(data)        url = 'http://' + self.url + '/soap/synchronousData'        log.info('角色类型同步参数正确:' + url)        headers = {'Content-Type': 'application/xml'}        r = self.post(url, headers=headers, data=datas)        log.info('传入参数:'+datas)        # print(json.dumps(r, ensure_ascii=False, indent=1))        # print(r.text)        sql = "select name,en_name,description,pid,seq_num from tb_role_type where name ='xxlRoleupdate'"        connect = ConnectMysql()        results = connect.get_select_data(sql)        for row in results:            name = row[0]            en_name = row[1]            description = row[2]            pid = row[3]        self.assertIn('&lt;retDesc&gt;同步成功&lt;', r.text)        self.assertEqual(name, 'xxlRoleupdate')        self.assertEqual(en_name, 'xxlRoleEnNameupdate')        self.assertEqual(description, 'xxlEdesc')        self.assertEqual(pid, '123')    '''角色类型同步，未传'''    def test_addRoleType_wrong(self):        # 获取init中的测试用例        datas = self.cf.getini_by_option('case_parameters.ini', '角色类型同步参数正确', 'v1')        # data = json.dumps(dataDist).strip("{'}")        # get_parameter = dict_to_get_parameter(data)        url = 'http://' + self.url + '/soap/synchronousData'        log.info('角色类型同步参数正确:' + url)        headers = {'Content-Type': 'application/xml'}        r = self.post(url, headers=headers, data=datas)        log.info('传入参数:' + datas)        # print(json.dumps(r, ensure_ascii=False, indent=1))        # print(r.text)        sql = "select name,en_name,description,pid,seq_num from tb_role_type where name ='xxlRoleupdate'"        connect = ConnectMysql()        results = connect.get_select_data(sql)        for row in results:            name = row[0]            en_name = row[1]            description = row[2]            pid = row[3]        self.assertIn('&lt;retDesc&gt;同步成功&lt;', r.text)        self.assertEqual(name, 'xxlRoleupdate')        self.assertEqual(en_name, 'xxlRoleEnNameupdate')        self.assertEqual(description, 'xxlEdesc')        self.assertEqual(pid, '123')if __name__ == '__main__':    addRoleType = AddRoleType()    addRoleType.test_addRoleType_right()