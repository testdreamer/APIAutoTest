# -*- coding: utf-8 -*-"""@Time ： 2022/5/25 11:07@Auth ： tianxh@File ：connectMysql.py@IDE ：PyCharm@Motto：No Bug No Error"""import pymysqlclass ConnectMysql:    """测试环境"""    # def __init__(self):    #     self.host = '192.168.13.188'    #     self.port = 3306    #     self.user = 'root'    #     self.passwd = 'Lyyl@2020'    #     self.db = 'udaam-admin-v3-demo'    #     self.charset = 'utf8'    """开发环境"""    def __init__(self):        self.host = '192.168.13.15'        self.port = 3306        self.user = 'root'        self.passwd = 'Mysql@2018'        self.db = 'udaam-v3-demo'        self.charset = 'utf8'    '''打开数据库连接'''    def connect(self):        try:            db = pymysql.connect(                host=self.host,                port=self.port,                user=self.user,                passwd=self.passwd,                db=self.db,                charset=self.charset)            # 获取游标            cursor = db.cursor()        except ConnectionError:            print("===Mysql连接失败，检查连接信息===")        return db, cursor    '''关闭数据库连接'''    def close_mysql(self, db):        try:            db.close()        except IOError:            print("===关闭数据库连接异常===")    '''查询数据库数据'''    def get_select_data(self, sql):        db, cursor = self.connect()        try:            # 执行SQL语句            cursor.execute(sql)            # 获取所有查询结果            results = cursor.fetchall()        except Exception:            print("===执行sql报错===")        finally:            self.close_mysql(db)        return results    '''更改（增、删、改）数据库数据'''    def change_data(self, sql):        db, cursor = self.connect()        try:            # 执行SQL语句            cursor.execute(sql)            # 提交修改            db.commit()        except Exception:            # 发生错误时回滚            db.rollback()            print("删除错误，删除已回滚")        finally:            self.close_mysql(db)